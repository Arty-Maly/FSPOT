<script src="https://maps.googleapis.com/maps/api/js"></script>
<script>
  $( document ).ready(function() {

     navigator.geolocation.getCurrentPosition(showMap);

     function showMap(position) {
      
      var mapCanvas = document.getElementById('map-canvas');

      var latlng = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);

      var mapOptions = {
        center: latlng,
        zoom: 14,
        mapTypeId: google.maps.MapTypeId.ROADMAP
      }
      var map = new google.maps.Map(mapCanvas, mapOptions)

      var marker = new google.maps.Marker({
        position: latlng,
        title: "your position"
      });
      marker.setMap(map);
    }

    function codeAddress(){
      var address = document.getElementById('address').value;
      geocoder.geocode({'address':address},function(results, status){
        if (status == google.maps.GeocoderStatus.OK) {
          map.setCenter(results[0].geometry.location);
          var marker = new google.maps.Marker({
            map: map,
            position: results[0].geometry.location
          });
        } else {
          alert('Geocode was not successful for the following reason: ' + status);
        }
      });
    }

});
</script>

<!-- search navbar -->
<div class="navbar navbar-default navbar-fixed-top" role="navigation">
	<div class="container">
		<div class="row">
			<div class="col-xs-3 col-lg-3">
				<a href="#" type="button" class="btn btn-default">
				  	<span class="glyphicon glyphicon-align-left" aria-hidden="true"></span>
				</a>
			</div>
			<div class="col-xs-6 col-lg-6">
				<%= form_tag '/maps/index', :method => 'get' do %>			   		 	
				<%= text_field_tag :search_location, nil, class: "form-control", id: "address" %>
			  <% submit_tag "search", :name => nil, :onclick => "return codeAddress();"  %>	
				<% end %>
		    </div>
		    <div class="col-xs-3 col-lg-3">
			    <a href="/main" type="button" class="btn btn-default">
				  	<span class="glyphicon glyphicon-cutlery" aria-hidden="true"></span>
				</a>
		    </div>
		</div>
	</div>
</div>
  	
<div class="container" id="map-canvas">

</div>




